============================= test session starts ==============================
platform darwin -- Python 3.12.12, pytest-9.0.2, pluggy-1.6.0 -- /Users/annhoward/src/solarpunk_utopia/venv/bin/python3
cachedir: .pytest_cache
rootdir: /Users/annhoward/src/solarpunk_utopia
plugins: anyio-4.12.0, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 295 items

tests/e2e/test_ancestor_voting_e2e.py::TestAncestorVotingE2E::test_create_memorial_fund_on_death PASSED [  0%]
tests/e2e/test_ancestor_voting_e2e.py::TestAncestorVotingE2E::test_allocate_ghost_reputation_to_proposal PASSED [  0%]
tests/e2e/test_ancestor_voting_e2e.py::TestAncestorVotingE2E::test_veto_allocation_within_window PASSED [  1%]
tests/e2e/test_ancestor_voting_e2e.py::TestAncestorVotingE2E::test_complete_allocation_after_proposal_approved PASSED [  1%]
tests/e2e/test_ancestor_voting_e2e.py::TestAncestorVotingE2E::test_family_requests_memorial_removal PASSED [  1%]
tests/e2e/test_ancestor_voting_e2e.py::TestAncestorVotingE2E::test_prioritize_marginalized_voices PASSED [  2%]
tests/e2e/test_ancestor_voting_e2e.py::TestAncestorVotingE2E::test_cannot_exceed_max_allocation_percentage PASSED [  2%]
tests/e2e/test_ancestor_voting_e2e.py::TestAncestorVotingE2E::test_voluntary_departure_creates_memorial PASSED [  2%]
tests/e2e/test_ancestor_voting_e2e.py::TestAncestorVotingE2E::test_list_memorial_funds_excludes_removal_requested PASSED [  3%]
tests/e2e/test_ancestor_voting_e2e.py::TestAncestorVotingE2E::test_impact_tracking_aggregates_correctly PASSED [  3%]
tests/e2e/test_ancestor_voting_e2e.py::TestAncestorVotingE2E::test_audit_log_tracks_all_actions PASSED [  3%]
tests/e2e/test_bakunin_analytics_e2e.py::TestBakuninAnalyticsE2E::test_alert_risk_levels_scale_with_concentration PASSED [  4%]
tests/e2e/test_bakunin_analytics_e2e.py::TestBakuninAnalyticsE2E::test_alert_to_dict_serialization PASSED [  4%]
tests/e2e/test_bakunin_analytics_e2e.py::TestBakuninAnalyticsE2E::test_detect_battery_warlord_high_concentration PASSED [  4%]
tests/e2e/test_bakunin_analytics_e2e.py::TestBakuninAnalyticsE2E::test_detect_skill_gatekeeper_monopoly PASSED [  5%]
tests/e2e/test_bakunin_analytics_e2e.py::TestBakuninAnalyticsE2E::test_multiple_power_concentrations_detected PASSED [  5%]
tests/e2e/test_bakunin_analytics_e2e.py::TestBakuninAnalyticsE2E::test_no_alert_when_resources_distributed PASSED [  5%]
tests/e2e/test_blocking_silent_failure_e2e.py::TestBlockingSilentFailureE2E::test_block_user_silent PASSED [  6%]
tests/e2e/test_blocking_silent_failure_e2e.py::TestBlockingSilentFailureE2E::test_messaging_returns_404_when_blocked PASSED [  6%]
tests/e2e/test_blocking_silent_failure_e2e.py::TestBlockingSilentFailureE2E::test_messaging_bidirectional_block_check PASSED [  6%]
tests/e2e/test_blocking_silent_failure_e2e.py::TestBlockingSilentFailureE2E::test_matching_silently_excludes_blocked PASSED [  7%]
tests/e2e/test_blocking_silent_failure_e2e.py::TestBlockingSilentFailureE2E::test_matching_excludes_if_either_blocked PASSED [  7%]
tests/e2e/test_blocking_silent_failure_e2e.py::TestBlockingSilentFailureE2E::test_unblock_resumes_normal_operation PASSED [  7%]
tests/e2e/test_blocking_silent_failure_e2e.py::TestBlockingSilentFailureE2E::test_get_blocked_list_returns_only_blockers_blocks PASSED [  8%]
tests/e2e/test_blocking_silent_failure_e2e.py::TestBlockingSilentFailureE2E::test_cannot_block_self PASSED [  8%]
tests/e2e/test_blocking_silent_failure_e2e.py::TestBlockingSilentFailureE2E::test_duplicate_block_is_idempotent PASSED [  8%]
tests/e2e/test_blocking_silent_failure_e2e.py::TestBlockingSilentFailureE2E::test_mutual_blocks_independent PASSED [  9%]
tests/e2e/test_cross_community_discovery_e2e.py::TestCrossCommunityDiscoveryE2E::test_same_cell_visibility PASSED [  9%]
tests/e2e/test_cross_community_discovery_e2e.py::TestCrossCommunityDiscoveryE2E::test_same_community_visibility PASSED [  9%]
tests/e2e/test_cross_community_discovery_e2e.py::TestCrossCommunityDiscoveryE2E::test_trusted_network_visibility PASSED [ 10%]
tests/e2e/test_cross_community_discovery_e2e.py::TestCrossCommunityDiscoveryE2E::test_local_radius_visibility PASSED [ 10%]
tests/e2e/test_cross_community_discovery_e2e.py::TestCrossCommunityDiscoveryE2E::test_network_wide_visibility PASSED [ 10%]
tests/e2e/test_cross_community_discovery_e2e.py::TestCrossCommunityDiscoveryE2E::test_blocking_overrides_visibility PASSED [ 11%]
tests/e2e/test_cross_community_discovery_e2e.py::TestCrossCommunityDiscoveryE2E::test_cross_community_discovery_scenario PASSED [ 11%]
tests/e2e/test_cross_community_discovery_e2e.py::TestCrossCommunityDiscoveryE2E::test_trust_distance_filtering PASSED [ 11%]
tests/e2e/test_cross_community_discovery_e2e.py::TestCrossCommunityDiscoveryE2E::test_public_vs_regional_audience PASSED [ 12%]
tests/e2e/test_cross_community_discovery_e2e.py::TestCrossCommunityDiscoveryE2E::test_geographic_locality_filtering PASSED [ 12%]
tests/e2e/test_cross_community_discovery_e2e.py::TestCrossCommunityDiscoveryE2E::test_visibility_respects_individual_choice PASSED [ 12%]
tests/e2e/test_dtn_mesh_sync_e2e.py::TestDTNMeshSyncE2E::test_basic_two_node_sync PASSED [ 13%]
tests/e2e/test_dtn_mesh_sync_e2e.py::TestDTNMeshSyncE2E::test_partial_overlap_sync PASSED [ 13%]
tests/e2e/test_dtn_mesh_sync_e2e.py::TestDTNMeshSyncE2E::test_emergency_priority_first PASSED [ 13%]
tests/e2e/test_dtn_mesh_sync_e2e.py::TestDTNMeshSyncE2E::test_expired_bundles_not_synced PASSED [ 14%]
tests/e2e/test_dtn_mesh_sync_e2e.py::TestDTNMeshSyncE2E::test_audience_enforcement_local_only PASSED [ 14%]
tests/e2e/test_dtn_mesh_sync_e2e.py::TestDTNMeshSyncE2E::test_audience_enforcement_high_trust PASSED [ 14%]
tests/e2e/test_dtn_mesh_sync_e2e.py::TestDTNMeshSyncE2E::test_hop_limit_enforcement PASSED [ 15%]
tests/e2e/test_dtn_mesh_sync_e2e.py::TestDTNMeshSyncE2E::test_bidirectional_sync PASSED [ 15%]
tests/e2e/test_dtn_mesh_sync_e2e.py::TestDTNMeshSyncE2E::test_no_duplicate_transfers PASSED [ 15%]
tests/e2e/test_governance_complete_flow.py::test_complete_governance_flow PASSED [ 16%]
tests/e2e/test_governance_e2e.py::TestGovernanceE2E::test_full_vote_flow_with_silence_check PASSED [ 16%]
tests/e2e/test_governance_e2e.py::TestGovernanceE2E::test_critical_vote_requires_quorum PASSED [ 16%]
tests/e2e/test_governance_e2e.py::TestGovernanceE2E::test_no_shaming_when_all_silent PASSED [ 17%]
tests/e2e/test_governance_e2e.py::TestGovernanceE2E::test_abstain_counts_as_participation PASSED [ 17%]
tests/e2e/test_governance_e2e.py::TestGovernanceE2E::test_vote_extension_multiple_times PASSED [ 17%]
tests/e2e/test_governance_e2e.py::TestGovernanceE2E::test_cannot_vote_after_close PASSED [ 18%]
tests/e2e/test_governance_e2e.py::TestGovernanceE2E::test_cannot_vote_if_not_eligible PASSED [ 18%]
tests/e2e/test_governance_e2e.py::TestGovernanceE2E::test_change_vote PASSED [ 18%]
tests/e2e/test_governance_e2e.py::TestGovernanceE2E::test_vote_result_tie PASSED [ 19%]
tests/e2e/test_governance_e2e.py::TestGovernanceE2E::test_privacy_no_cross_session_tracking PASSED [ 19%]
tests/e2e/test_mycelial_strike_e2e.py::TestMycelialStrikeE2E::test_create_warlord_alert_with_evidence PASSED [ 20%]
tests/e2e/test_mycelial_strike_e2e.py::TestMycelialStrikeE2E::test_alert_triggers_automatic_strike PASSED [ 20%]
tests/e2e/test_mycelial_strike_e2e.py::TestMycelialStrikeE2E::test_low_trust_source_does_not_trigger_automatic_strike PASSED [ 20%]
tests/e2e/test_mycelial_strike_e2e.py::TestMycelialStrikeE2E::test_severity_determines_throttle_level PASSED [ 21%]
tests/e2e/test_mycelial_strike_e2e.py::TestMycelialStrikeE2E::test_steward_can_override_strike PASSED [ 21%]
tests/e2e/test_mycelial_strike_e2e.py::TestMycelialStrikeE2E::test_behavior_improvement_triggers_deescalation PASSED [ 21%]
tests/e2e/test_mycelial_strike_e2e.py::TestMycelialStrikeE2E::test_whitelisted_user_immune_to_automatic_strikes PASSED [ 22%]
tests/e2e/test_mycelial_strike_e2e.py::TestMycelialStrikeE2E::test_alert_cancellation_by_reporter PASSED [ 22%]
tests/e2e/test_mycelial_strike_e2e.py::TestMycelialStrikeE2E::test_multiple_corroborating_alerts_increase_severity PASSED [ 22%]
tests/e2e/test_mycelial_strike_e2e.py::TestMycelialStrikeE2E::test_time_based_alert_expiration PASSED [ 23%]
tests/e2e/test_rapid_response_e2e.py::TestRapidResponseE2E::test_full_rapid_response_flow FAILED [ 23%]
tests/e2e/test_rapid_response_e2e.py::TestRapidResponseE2E::test_critical_alert_requires_high_trust FAILED [ 23%]
tests/e2e/test_rapid_response_e2e.py::TestRapidResponseE2E::test_critical_alert_auto_downgrade_if_unconfirmed FAILED [ 24%]
tests/e2e/test_rapid_response_e2e.py::TestRapidResponseE2E::test_alert_propagation_priority FAILED [ 24%]
tests/e2e/test_rapid_response_e2e.py::TestRapidResponseE2E::test_alert_purge_after_24_hours FAILED [ 24%]
tests/e2e/test_rapid_response_e2e.py::TestRapidResponseE2E::test_responder_coordination_flow FAILED [ 25%]
tests/e2e/test_sanctuary_network_e2e.py::TestSanctuaryNetworkE2E::test_full_sanctuary_flow PASSED [ 25%]
tests/e2e/test_sanctuary_network_e2e.py::TestSanctuaryNetworkE2E::test_high_sensitivity_requires_high_trust PASSED [ 25%]
tests/e2e/test_sanctuary_network_e2e.py::TestSanctuaryNetworkE2E::test_steward_cannot_verify_twice PASSED [ 26%]
tests/e2e/test_sanctuary_network_e2e.py::TestSanctuaryNetworkE2E::test_verification_expires_after_90_days PASSED [ 26%]
tests/e2e/test_sanctuary_network_e2e.py::TestSanctuaryNetworkE2E::test_high_trust_resources_for_critical_needs PASSED [ 26%]
tests/e2e/test_sanctuary_network_e2e.py::TestSanctuaryNetworkE2E::test_needs_second_verification_flag PASSED [ 27%]
tests/e2e/test_saturnalia_e2e.py::TestSaturnaliaE2E::test_create_annual_role_swap_configuration PASSED [ 27%]
tests/e2e/test_saturnalia_e2e.py::TestSaturnaliaE2E::test_manual_trigger_saturnalia_event PASSED [ 27%]
tests/e2e/test_saturnalia_e2e.py::TestSaturnaliaE2E::test_role_swap_during_event PASSED [ 28%]
tests/e2e/test_saturnalia_e2e.py::TestSaturnaliaE2E::test_opt_out_from_saturnalia_mode PASSED [ 28%]
tests/e2e/test_saturnalia_e2e.py::TestSaturnaliaE2E::test_complete_event_restores_roles PASSED [ 28%]
tests/e2e/test_saturnalia_e2e.py::TestSaturnaliaE2E::test_cancel_event_with_reason PASSED [ 29%]
tests/e2e/test_saturnalia_e2e.py::TestSaturnaliaE2E::test_anonymous_posting_during_event PASSED [ 29%]
tests/e2e/test_saturnalia_e2e.py::TestSaturnaliaE2E::test_reflection_submission_after_event PASSED [ 29%]
tests/e2e/test_saturnalia_e2e.py::TestSaturnaliaE2E::test_exclude_safety_critical_features PASSED [ 30%]
tests/e2e/test_saturnalia_e2e.py::TestSaturnaliaE2E::test_multiple_modes_simultaneously PASSED [ 30%]
tests/e2e/test_saturnalia_e2e.py::TestSaturnaliaE2E::test_check_event_expiry_auto_completion PASSED [ 30%]
tests/e2e/test_saturnalia_e2e.py::TestSaturnaliaE2E::test_get_active_event_for_cell PASSED [ 31%]
tests/e2e/test_saturnalia_e2e.py::TestSaturnaliaE2E::test_permanent_opt_out PASSED [ 31%]
tests/e2e/test_saturnalia_e2e.py::TestSaturnaliaE2E::test_update_configuration PASSED [ 31%]
tests/e2e/test_web_of_trust_e2e.py::TestWebOfTrustE2E::test_genesis_to_alice_vouch_chain PASSED [ 32%]
tests/e2e/test_web_of_trust_e2e.py::TestWebOfTrustE2E::test_multi_hop_vouch_chain_with_attenuation PASSED [ 32%]
tests/e2e/test_web_of_trust_e2e.py::TestWebOfTrustE2E::test_vouch_revocation_reduces_trust PASSED [ 32%]
tests/e2e/test_web_of_trust_e2e.py::TestWebOfTrustE2E::test_revocation_cascade_affects_downstream_users PASSED [ 33%]
tests/e2e/test_web_of_trust_e2e.py::TestWebOfTrustE2E::test_partial_revocation_preserves_alternate_paths PASSED [ 33%]
tests/e2e/test_web_of_trust_e2e.py::TestWebOfTrustE2E::test_monthly_vouch_limit_prevents_spam PASSED [ 33%]
tests/e2e/test_web_of_trust_e2e.py::TestWebOfTrustE2E::test_cannot_vouch_for_same_user_twice PASSED [ 34%]
tests/e2e/test_web_of_trust_e2e.py::TestWebOfTrustE2E::test_low_trust_user_cannot_vouch PASSED [ 34%]
tests/e2e/test_web_of_trust_e2e.py::TestWebOfTrustE2E::test_multiple_genesis_nodes_provide_redundancy PASSED [ 34%]
tests/e2e/test_web_of_trust_e2e.py::TestWebOfTrustE2E::test_trust_score_caching_improves_performance PASSED [ 35%]
tests/integration/test_end_to_end_gift_economy.py::TestGiftEconomyFlow::test_complete_offer_need_exchange_flow FAILED [ 35%]
tests/integration/test_end_to_end_gift_economy.py::TestGiftEconomyFlow::test_bundle_propagation_across_services FAILED [ 35%]
tests/integration/test_end_to_end_gift_economy.py::TestGiftEconomyFlow::test_agent_proposals_require_approval FAILED [ 36%]
tests/integration/test_knowledge_distribution.py::TestKnowledgeDistribution::test_complete_file_distribution_flow FAILED [ 36%]
tests/integration/test_knowledge_distribution.py::TestKnowledgeDistribution::test_library_node_caching FAILED [ 36%]
tests/test_algorithmic_transparency.py::test_match_explanation_creation PASSED [ 37%]
tests/test_algorithmic_transparency.py::test_explanation_formatting_minimal PASSED [ 37%]
tests/test_algorithmic_transparency.py::test_explanation_formatting_detailed PASSED [ 37%]
tests/test_algorithmic_transparency.py::test_weights_validation PASSED   [ 38%]
tests/test_algorithmic_transparency.py::test_custom_weights PASSED       [ 38%]
tests/test_algorithmic_transparency.py::test_geographic_bias_detection PASSED [ 38%]
tests/test_algorithmic_transparency.py::test_category_bias_detection PASSED [ 39%]
tests/test_algorithmic_transparency.py::test_audit_log_creation PASSED   [ 39%]
tests/test_algorithmic_transparency.py::test_rejection_logging PASSED    [ 40%]
tests/test_algorithmic_transparency.py::test_transparency_preferences PASSED [ 40%]
tests/test_algorithmic_transparency.py::test_preference_defaults PASSED  [ 40%]
tests/test_algorithmic_transparency.py::test_end_to_end_transparency PASSED [ 41%]
tests/test_algorithmic_transparency.py::test_bias_report_generation PASSED [ 41%]
tests/test_api_endpoint_fixes.py::TestMatchAcceptReject::test_accept_endpoint_exists PASSED [ 41%]
tests/test_api_endpoint_fixes.py::TestMatchAcceptReject::test_reject_endpoint_exists PASSED [ 42%]
tests/test_api_endpoint_fixes.py::TestMatchAcceptReject::test_accept_match_updates_status PASSED [ 42%]
tests/test_api_endpoint_fixes.py::TestMatchAcceptReject::test_reject_match_updates_status PASSED [ 42%]
tests/test_api_endpoint_fixes.py::TestCommitmentsEndpoint::test_commitments_router_exists PASSED [ 43%]
tests/test_api_endpoint_fixes.py::TestCommitmentsEndpoint::test_get_commitments_endpoint_exists PASSED [ 43%]
tests/test_api_endpoint_fixes.py::TestCommitmentsEndpoint::test_create_commitment_endpoint_exists PASSED [ 43%]
tests/test_api_endpoint_fixes.py::TestCommitmentsEndpoint::test_get_commitment_by_id_endpoint_exists PASSED [ 44%]
tests/test_api_endpoint_fixes.py::TestCommitmentsEndpoint::test_update_commitment_endpoint_exists PASSED [ 44%]
tests/test_api_endpoint_fixes.py::TestCommitmentsEndpoint::test_delete_commitment_endpoint_exists PASSED [ 44%]
tests/test_api_endpoint_fixes.py::TestCommitmentsEndpoint::test_get_commitments_returns_list PASSED [ 45%]
tests/test_api_endpoint_fixes.py::TestListingDeletion::test_listing_delete_has_ownership_todo PASSED [ 45%]
tests/test_api_endpoint_fixes.py::TestListingDeletion::test_listing_delete_works PASSED [ 45%]
tests/test_api_endpoint_fixes.py::TestProposalRejection::test_reject_proposal_has_auth_dependency PASSED [ 46%]
tests/test_api_endpoint_fixes.py::TestProposalRejection::test_reject_proposal_uses_current_user_id PASSED [ 46%]
tests/test_api_endpoint_fixes.py::test_commitments_router_registered PASSED [ 46%]
tests/test_care_outreach.py::TestVolunteerManagement::test_register_volunteer PASSED [ 47%]
tests/test_care_outreach.py::TestVolunteerManagement::test_find_available_volunteer PASSED [ 47%]
tests/test_care_outreach.py::TestOutreachAssignment::test_flag_for_outreach PASSED [ 47%]
tests/test_care_outreach.py::TestOutreachAssignment::test_add_outreach_note PASSED [ 48%]
tests/test_care_outreach.py::TestOutreachAssignment::test_mark_converted PASSED [ 48%]
tests/test_care_outreach.py::TestNeedsAssessment::test_assess_and_provide PASSED [ 48%]
tests/test_care_outreach.py::TestAccessLevels::test_access_level_receiving_care PASSED [ 49%]
tests/test_care_outreach.py::TestAccessLevels::test_access_permissions_minimal_but_human PASSED [ 49%]
tests/test_care_outreach.py::TestSuspectedInfiltrator::test_handle_suspected_infiltrator PASSED [ 49%]
tests/test_care_outreach.py::TestConversionMetrics::test_get_metrics PASSED [ 50%]
tests/test_care_outreach.py::TestConversionExperiences::test_suggest_experience_for_new_outreach PASSED [ 50%]
tests/test_care_outreach.py::TestConversionExperiences::test_get_all_experiences PASSED [ 50%]
tests/test_economic_withdrawal.py::test_create_campaign PASSED           [ 51%]
tests/test_economic_withdrawal.py::test_pledge_to_campaign PASSED        [ 51%]
tests/test_economic_withdrawal.py::test_campaign_activation PASSED       [ 51%]
tests/test_economic_withdrawal.py::test_mark_avoided_target PASSED       [ 52%]
tests/test_economic_withdrawal.py::test_create_corporate_alternative PASSED [ 52%]
tests/test_economic_withdrawal.py::test_exit_progress_tracking PASSED    [ 52%]
tests/test_economic_withdrawal.py::test_bulk_buy_creation PASSED         [ 53%]
tests/test_economic_withdrawal.py::test_bulk_buy_commitment PASSED       [ 53%]
tests/test_fork_rights.py::test_request_data_export PASSED               [ 53%]
tests/test_fork_rights.py::test_export_user_data PASSED                  [ 54%]
tests/test_fork_rights.py::test_export_respects_privacy PASSED           [ 54%]
tests/test_fork_rights.py::test_connection_consent_request PASSED        [ 54%]
tests/test_fork_rights.py::test_respond_to_consent PASSED                [ 55%]
tests/test_fork_rights.py::test_fork_community PASSED                    [ 55%]
tests/test_fork_rights.py::test_leave_community PASSED                   [ 55%]
tests/test_fork_rights.py::test_no_exit_surveillance PASSED              [ 56%]
tests/test_fork_rights.py::test_no_connection_export_without_consent PASSED [ 56%]
tests/test_fork_rights.py::test_connection_export_with_consent PASSED    [ 56%]
tests/test_fork_rights.py::test_local_first_export PASSED                [ 57%]
tests/test_fork_rights.py::test_export_works_offline PASSED              [ 57%]
tests/test_fraud_abuse_protections.py::TestMonthlyVouchLimit::test_vouch_limit_enforced PASSED [ 57%]
tests/test_fraud_abuse_protections.py::TestMonthlyVouchLimit::test_vouch_allowed_under_limit PASSED [ 58%]
tests/test_fraud_abuse_protections.py::TestVouchRevocationCooloff::test_revocation_within_cooloff_no_consequence PASSED [ 58%]
tests/test_fraud_abuse_protections.py::TestVouchRevocationCooloff::test_revocation_after_cooloff_requires_reason PASSED [ 58%]
tests/test_fraud_abuse_protections.py::TestBlockList::test_block_user_creates_entry PASSED [ 59%]
tests/test_fraud_abuse_protections.py::TestBlockList::test_is_blocked_bidirectional PASSED [ 59%]
tests/test_fraud_abuse_protections.py::TestBlockList::test_block_prevents_match PASSED [ 60%]
tests/test_fraud_abuse_protections.py::TestSanctuaryVerification::test_verification_requires_min_stewards PASSED [ 60%]
tests/test_fraud_abuse_protections.py::TestSanctuaryVerification::test_verification_valid_with_min_stewards PASSED [ 60%]
tests/test_fraud_abuse_protections.py::TestSanctuaryVerification::test_verification_expires_after_90_days PASSED [ 61%]
tests/test_fraud_abuse_protections.py::TestSanctuaryVerification::test_high_trust_requires_successful_uses PASSED [ 61%]
tests/test_fraud_abuse_protections.py::TestAutoLock::test_inactivity_timeout_constant PASSED [ 61%]
tests/test_governance_silence_weight.py::TestSilenceWeightCalculations::test_silence_weight_with_no_votes PASSED [ 62%]
tests/test_governance_silence_weight.py::TestSilenceWeightCalculations::test_silence_weight_with_partial_votes PASSED [ 62%]
tests/test_governance_silence_weight.py::TestSilenceWeightCalculations::test_silence_weight_with_majority_voted PASSED [ 62%]
tests/test_governance_silence_weight.py::TestSilenceWeightCalculations::test_silence_weight_with_all_voted PASSED [ 63%]
tests/test_governance_silence_weight.py::TestQuorumRequirements::test_no_quorum_required_always_passes PASSED [ 63%]
tests/test_governance_silence_weight.py::TestQuorumRequirements::test_quorum_not_met PASSED [ 63%]
tests/test_governance_silence_weight.py::TestQuorumRequirements::test_quorum_met PASSED [ 64%]
tests/test_governance_silence_weight.py::TestQuorumRequirements::test_abstain_counts_toward_quorum PASSED [ 64%]
tests/test_governance_silence_weight.py::TestVoteResults::test_result_none_when_open PASSED [ 64%]
tests/test_governance_silence_weight.py::TestVoteResults::test_result_passed PASSED [ 65%]
tests/test_governance_silence_weight.py::TestVoteResults::test_result_failed PASSED [ 65%]
tests/test_governance_silence_weight.py::TestVoteResults::test_result_no_quorum PASSED [ 65%]
tests/test_governance_silence_weight.py::TestGovernanceRepository::test_create_and_get_vote_session PASSED [ 66%]
tests/test_governance_silence_weight.py::TestGovernanceRepository::test_cast_vote PASSED [ 66%]
tests/test_governance_silence_weight.py::TestGovernanceRepository::test_extend_vote_session PASSED [ 66%]
tests/test_governance_silence_weight.py::TestGovernanceRepository::test_outreach_ephemeral FAILED [ 67%]
tests/test_governance_silence_weight.py::TestPrivacyGuarantees::test_no_silence_history_tracking PASSED [ 67%]
tests/test_governance_silence_weight.py::TestPrivacyGuarantees::test_silent_voters_computed_not_stored PASSED [ 67%]
tests/test_governance_silence_weight.py::TestPrivacyGuarantees::test_outreach_auto_purge_prevents_tracking PASSED [ 68%]
tests/test_governance_silence_weight.py::TestGovernanceService::test_check_silence_weight_gentle_prompt PASSED [ 68%]
tests/test_harness.py::TestMultiNodeHarness::test_create_nodes PASSED    [ 68%]
tests/test_harness.py::TestMultiNodeHarness::test_connect_nodes PASSED   [ 69%]
tests/test_harness.py::TestMultiNodeHarness::test_disconnect_nodes PASSED [ 69%]
tests/test_harness.py::TestMultiNodeHarness::test_create_bundle PASSED   [ 69%]
tests/test_harness.py::TestMultiNodeHarness::test_sync_transfers_bundles PASSED [ 70%]
tests/test_harness.py::TestMultiNodeHarness::test_sync_respects_priority PASSED [ 70%]
tests/test_harness.py::TestMultiNodeHarness::test_bundle_expiration PASSED [ 70%]
tests/test_harness.py::TestMultiNodeHarness::test_hop_limit PASSED       [ 71%]
tests/test_harness.py::TestMultiNodeHarness::test_propagate_bundle PASSED [ 71%]
tests/test_harness.py::TestTimeControl::test_freeze_time FAILED          [ 71%]
tests/test_harness.py::TestTimeControl::test_advance_time FAILED         [ 72%]
tests/test_harness.py::TestTimeControl::test_advance_with_units FAILED   [ 72%]
tests/test_harness.py::TestTimeControl::test_freeze_time_context_manager FAILED [ 72%]
tests/test_harness.py::TestTimeControl::test_advance_time_context_manager FAILED [ 73%]
tests/test_harness.py::TestTrustGraphFixtures::test_create_node PASSED   [ 73%]
tests/test_harness.py::TestTrustGraphFixtures::test_create_vouch PASSED  [ 73%]
tests/test_harness.py::TestTrustGraphFixtures::test_trust_propagation PASSED [ 74%]
tests/test_harness.py::TestTrustGraphFixtures::test_revoke_vouch FAILED  [ 74%]
tests/test_harness.py::TestTrustGraphFixtures::test_create_trust_chain PASSED [ 74%]
tests/test_harness.py::TestTrustGraphFixtures::test_create_disjoint_communities PASSED [ 75%]
tests/test_harness.py::TestTrustGraphFixtures::test_create_ring_topology PASSED [ 75%]
tests/test_harness.py::TestTrustGraphFixtures::test_create_star_topology PASSED [ 75%]
tests/test_harness.py::TestTrustGraphFixtures::test_export_graph PASSED  [ 76%]
tests/test_network_import_offline.py::test_threshold_signature_attestation_offline PASSED [ 76%]
tests/test_network_import_offline.py::test_in_person_attestation_claim_offline PASSED [ 76%]
tests/test_network_import_offline.py::test_challenge_response_verification_offline PASSED [ 77%]
tests/test_network_import_offline.py::test_mesh_vouch_verification_offline PASSED [ 77%]
tests/test_network_import_offline.py::test_steward_bulk_vouch_offline PASSED [ 77%]
tests/test_network_import_offline.py::test_steward_accountability_offline PASSED [ 78%]
tests/test_network_import_offline.py::test_trust_bonus_calculation_offline PASSED [ 78%]
tests/test_network_import_offline.py::test_no_external_dependencies PASSED [ 78%]
tests/test_panic_features.py::test_duress_pin_set_and_verify PASSED      [ 79%]
tests/test_panic_features.py::test_duress_pin_creates_burn_notice PASSED [ 79%]
tests/test_panic_features.py::test_quick_wipe_configuration PASSED       [ 80%]
tests/test_panic_features.py::test_quick_wipe_requires_confirmation PASSED [ 80%]
tests/test_panic_features.py::test_quick_wipe_destroys_data PASSED       [ 80%]
tests/test_panic_features.py::test_dead_mans_switch_configuration PASSED [ 81%]
tests/test_panic_features.py::test_dead_mans_switch_checkin PASSED       [ 81%]
tests/test_panic_features.py::test_decoy_mode_configuration PASSED       [ 81%]
tests/test_panic_features.py::test_burn_notice_creation PASSED           [ 82%]
tests/test_panic_features.py::test_burn_notice_resolution PASSED         [ 82%]
tests/test_panic_features.py::test_seed_phrase_generation PASSED         [ 82%]
tests/test_panic_features.py::test_seed_phrase_encryption_decryption PASSED [ 83%]
tests/test_panic_features.py::test_panic_status_aggregation PASSED       [ 83%]
tests/test_panic_features.py::test_overdue_dead_mans_switches PASSED     [ 83%]
tests/test_sanctuary_multi_steward_verification.py::TestSingleStewardVerificationNotEnough::test_single_verification_keeps_status_pending PASSED [ 84%]
tests/test_sanctuary_multi_steward_verification.py::TestSingleStewardVerificationNotEnough::test_single_verification_not_available_for_matching PASSED [ 84%]
tests/test_sanctuary_multi_steward_verification.py::TestTwoStewardVerificationSucceeds::test_two_stewards_changes_status_to_verified PASSED [ 84%]
tests/test_sanctuary_multi_steward_verification.py::TestTwoStewardVerificationSucceeds::test_two_stewards_makes_resource_available PASSED [ 85%]
tests/test_sanctuary_multi_steward_verification.py::TestTwoStewardVerificationSucceeds::test_verification_metadata_updated PASSED [ 85%]
tests/test_sanctuary_multi_steward_verification.py::TestSameStewardCannotVerifyTwice::test_same_steward_rejected PASSED [ 85%]
tests/test_sanctuary_multi_steward_verification.py::TestResourcesNeedingVerification::test_pending_verification_list PASSED [ 86%]
tests/test_sanctuary_multi_steward_verification.py::TestResourcesNeedingVerification::test_pending_excludes_steward_who_verified PASSED [ 86%]
tests/test_sanctuary_multi_steward_verification.py::TestSuccessfulUsesTracking::test_record_successful_use PASSED [ 86%]
tests/test_sanctuary_multi_steward_verification.py::TestSuccessfulUsesTracking::test_failed_use_does_not_increment PASSED [ 87%]
tests/test_sanctuary_multi_steward_verification.py::TestSuccessfulUsesTracking::test_multiple_successful_uses PASSED [ 87%]
tests/test_sanctuary_multi_steward_verification.py::TestCriticalNeedsFilteringExcluded::test_new_sanctuary_not_high_trust PASSED [ 87%]
tests/test_sanctuary_multi_steward_verification.py::TestCriticalNeedsFilteringExcluded::test_proven_sanctuary_is_high_trust PASSED [ 88%]
tests/test_sanctuary_multi_steward_verification.py::TestVerificationModels::test_verification_is_valid_property PASSED [ 88%]
tests/test_sanctuary_multi_steward_verification.py::TestVerificationModels::test_verification_invalid_if_too_few PASSED [ 88%]
tests/test_sanctuary_multi_steward_verification.py::TestVerificationModels::test_verification_invalid_if_expired PASSED [ 89%]
tests/test_sanctuary_multi_steward_verification.py::TestVerificationModels::test_is_high_trust_requires_three_uses PASSED [ 89%]
tests/test_sanctuary_multi_steward_verification.py::TestVerificationModels::test_is_high_trust_false_with_low_uses PASSED [ 89%]
tests/unit/test_bundle_service.py::TestBundleCreation::test_create_simple_bundle FAILED [ 90%]
tests/unit/test_bundle_service.py::TestBundleCreation::test_create_bundle_with_ttl_hours FAILED [ 90%]
tests/unit/test_bundle_service.py::TestBundleCreation::test_create_bundle_auto_ttl FAILED [ 90%]
tests/unit/test_bundle_service.py::TestBundleCreation::test_create_bundle_with_tags FAILED [ 91%]
tests/unit/test_bundle_service.py::TestBundleCreation::test_bundle_id_is_content_addressed FAILED [ 91%]
tests/unit/test_bundle_service.py::TestBundleValidation::test_validate_valid_bundle FAILED [ 91%]
tests/unit/test_bundle_service.py::TestBundleValidation::test_reject_tampered_payload FAILED [ 92%]
tests/unit/test_bundle_service.py::TestBundleValidation::test_reject_expired_bundle FAILED [ 92%]
tests/unit/test_bundle_service.py::TestBundleValidation::test_reject_invalid_signature FAILED [ 92%]
tests/unit/test_bundle_service.py::TestBundleValidation::test_reject_hop_limit_exceeded PASSED [ 93%]
tests/unit/test_bundle_service.py::TestBundleReceiving::test_receive_valid_bundle FAILED [ 93%]
tests/unit/test_bundle_service.py::TestBundleReceiving::test_reject_duplicate_bundle FAILED [ 93%]
tests/unit/test_bundle_service.py::TestBundleReceiving::test_quarantine_invalid_bundle FAILED [ 94%]
tests/unit/test_bundle_service.py::TestBundleProperties::test_bundle_snake_case_aliases FAILED [ 94%]
tests/unit/test_bundle_service.py::TestBundleProperties::test_is_expired PASSED [ 94%]
tests/unit/test_bundle_service.py::TestBundleProperties::test_is_hop_limit_exceeded PASSED [ 95%]
tests/unit/test_web_of_trust.py::test_genesis_node_has_full_trust PASSED [ 95%]
tests/unit/test_web_of_trust.py::test_single_hop_vouch PASSED            [ 95%]
tests/unit/test_web_of_trust.py::test_two_hop_vouch_chain PASSED         [ 96%]
tests/unit/test_web_of_trust.py::test_multiple_vouch_chains_uses_best PASSED [ 96%]
tests/unit/test_web_of_trust.py::test_no_path_to_genesis PASSED          [ 96%]
tests/unit/test_web_of_trust.py::test_revocation_reduces_trust PASSED    [ 97%]
tests/unit/test_web_of_trust.py::test_revocation_cascade PASSED          [ 97%]
tests/unit/test_web_of_trust.py::test_partial_revocation_cascade PASSED  [ 97%]
tests/unit/test_web_of_trust.py::test_trust_threshold_check PASSED       [ 98%]
tests/unit/test_web_of_trust.py::test_vouch_eligibility PASSED           [ 98%]
tests/unit/test_web_of_trust.py::test_cached_trust_score PASSED          [ 98%]
tests/unit/test_web_of_trust.py::test_vouch_count_and_revocation_count PASSED [ 99%]
tests/unit/test_web_of_trust.py::test_genesis_node_list PASSED           [ 99%]
tests/unit/test_web_of_trust.py::test_is_genesis_node PASSED             [100%]

=================================== FAILURES ===================================
______________ TestRapidResponseE2E.test_full_rapid_response_flow ______________
tests/e2e/test_rapid_response_e2e.py:152: in test_full_rapid_response_flow
    alert = await self.service.create_alert(
app/services/rapid_response_service.py:98: in create_alert
    bundle_id = await self._propagate_alert(alert)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/services/rapid_response_service.py:138: in _propagate_alert
    bundle = await self.bundle_service.create_bundle(bundle_create)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/services/bundle_service.py:79: in create_bundle
    await QueueManager.enqueue(QueueName.OUTBOX, bundle)
app/database/queues.py:120: in enqueue
    await db.execute("""
venv/lib/python3.12/site-packages/aiosqlite/core.py:193: in execute
    cursor = await self._execute(self._conn.execute, sql, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:132: in _execute
    return await future
           ^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:115: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: attempt to write a readonly database
_________ TestRapidResponseE2E.test_critical_alert_requires_high_trust _________
tests/e2e/test_rapid_response_e2e.py:320: in test_critical_alert_requires_high_trust
    watch_alert = await self.service.create_alert(
app/services/rapid_response_service.py:98: in create_alert
    bundle_id = await self._propagate_alert(alert)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/services/rapid_response_service.py:138: in _propagate_alert
    bundle = await self.bundle_service.create_bundle(bundle_create)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/services/bundle_service.py:79: in create_bundle
    await QueueManager.enqueue(QueueName.OUTBOX, bundle)
app/database/queues.py:120: in enqueue
    await db.execute("""
venv/lib/python3.12/site-packages/aiosqlite/core.py:193: in execute
    cursor = await self._execute(self._conn.execute, sql, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:132: in _execute
    return await future
           ^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:115: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: attempt to write a readonly database
____ TestRapidResponseE2E.test_critical_alert_auto_downgrade_if_unconfirmed ____
tests/e2e/test_rapid_response_e2e.py:341: in test_critical_alert_auto_downgrade_if_unconfirmed
    alert = await self.service.create_alert(
app/services/rapid_response_service.py:98: in create_alert
    bundle_id = await self._propagate_alert(alert)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/services/rapid_response_service.py:138: in _propagate_alert
    bundle = await self.bundle_service.create_bundle(bundle_create)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/services/bundle_service.py:79: in create_bundle
    await QueueManager.enqueue(QueueName.OUTBOX, bundle)
app/database/queues.py:120: in enqueue
    await db.execute("""
venv/lib/python3.12/site-packages/aiosqlite/core.py:193: in execute
    cursor = await self._execute(self._conn.execute, sql, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:132: in _execute
    return await future
           ^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:115: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: attempt to write a readonly database
_____________ TestRapidResponseE2E.test_alert_propagation_priority _____________
tests/e2e/test_rapid_response_e2e.py:373: in test_alert_propagation_priority
    critical_alert = await self.service.create_alert(
app/services/rapid_response_service.py:98: in create_alert
    bundle_id = await self._propagate_alert(alert)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/services/rapid_response_service.py:138: in _propagate_alert
    bundle = await self.bundle_service.create_bundle(bundle_create)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/services/bundle_service.py:79: in create_bundle
    await QueueManager.enqueue(QueueName.OUTBOX, bundle)
app/database/queues.py:120: in enqueue
    await db.execute("""
venv/lib/python3.12/site-packages/aiosqlite/core.py:193: in execute
    cursor = await self._execute(self._conn.execute, sql, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:132: in _execute
    return await future
           ^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:115: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: attempt to write a readonly database
_____________ TestRapidResponseE2E.test_alert_purge_after_24_hours _____________
tests/e2e/test_rapid_response_e2e.py:409: in test_alert_purge_after_24_hours
    alert = await self.service.create_alert(
app/services/rapid_response_service.py:98: in create_alert
    bundle_id = await self._propagate_alert(alert)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/services/rapid_response_service.py:138: in _propagate_alert
    bundle = await self.bundle_service.create_bundle(bundle_create)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/services/bundle_service.py:79: in create_bundle
    await QueueManager.enqueue(QueueName.OUTBOX, bundle)
app/database/queues.py:120: in enqueue
    await db.execute("""
venv/lib/python3.12/site-packages/aiosqlite/core.py:193: in execute
    cursor = await self._execute(self._conn.execute, sql, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:132: in _execute
    return await future
           ^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:115: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: attempt to write a readonly database
____________ TestRapidResponseE2E.test_responder_coordination_flow _____________
tests/e2e/test_rapid_response_e2e.py:451: in test_responder_coordination_flow
    alert = await self.service.create_alert(
app/services/rapid_response_service.py:98: in create_alert
    bundle_id = await self._propagate_alert(alert)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/services/rapid_response_service.py:138: in _propagate_alert
    bundle = await self.bundle_service.create_bundle(bundle_create)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/services/bundle_service.py:79: in create_bundle
    await QueueManager.enqueue(QueueName.OUTBOX, bundle)
app/database/queues.py:120: in enqueue
    await db.execute("""
venv/lib/python3.12/site-packages/aiosqlite/core.py:193: in execute
    cursor = await self._execute(self._conn.execute, sql, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:132: in _execute
    return await future
           ^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:115: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: attempt to write a readonly database
__________ TestGiftEconomyFlow.test_complete_offer_need_exchange_flow __________
venv/lib/python3.12/site-packages/httpx/_transports/default.py:101: in map_httpcore_exceptions
    yield
venv/lib/python3.12/site-packages/httpx/_transports/default.py:394: in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/httpcore/_async/connection_pool.py:256: in handle_async_request
    raise exc from None
venv/lib/python3.12/site-packages/httpcore/_async/connection_pool.py:236: in handle_async_request
    response = await connection.handle_async_request(
venv/lib/python3.12/site-packages/httpcore/_async/connection.py:101: in handle_async_request
    raise exc
venv/lib/python3.12/site-packages/httpcore/_async/connection.py:78: in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/httpcore/_async/connection.py:124: in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/httpcore/_backends/auto.py:31: in connect_tcp
    return await self._backend.connect_tcp(
venv/lib/python3.12/site-packages/httpcore/_backends/anyio.py:113: in connect_tcp
    with map_exceptions(exc_map):
         ^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py:158: in __exit__
    self.gen.throw(value)
venv/lib/python3.12/site-packages/httpcore/_exceptions.py:14: in map_exceptions
    raise to_exc(exc) from exc
E   httpcore.ConnectError: All connection attempts failed

The above exception was the direct cause of the following exception:
tests/integration/test_end_to_end_gift_economy.py:41: in test_complete_offer_need_exchange_flow
    alice_resp = await client.post(
venv/lib/python3.12/site-packages/httpx/_client.py:1859: in post
    return await self.request(
venv/lib/python3.12/site-packages/httpx/_client.py:1540: in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/httpx/_client.py:1629: in send
    response = await self._send_handling_auth(
venv/lib/python3.12/site-packages/httpx/_client.py:1657: in _send_handling_auth
    response = await self._send_handling_redirects(
venv/lib/python3.12/site-packages/httpx/_client.py:1694: in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/httpx/_client.py:1730: in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/httpx/_transports/default.py:393: in handle_async_request
    with map_httpcore_exceptions():
         ^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py:158: in __exit__
    self.gen.throw(value)
venv/lib/python3.12/site-packages/httpx/_transports/default.py:118: in map_httpcore_exceptions
    raise mapped_exc(message) from exc
E   httpx.ConnectError: All connection attempts failed
----------------------------- Captured stdout call -----------------------------

=== Step 1: Creating agents ===
_________ TestGiftEconomyFlow.test_bundle_propagation_across_services __________
tests/integration/test_end_to_end_gift_economy.py:266: in test_bundle_propagation_across_services
    assert bundle_resp.status_code == 200
E   assert 500 == 200
E    +  where 500 = <Response [500 Internal Server Error]>.status_code
----------------------------- Captured stdout call -----------------------------

=== Testing Bundle Propagation ===
__________ TestGiftEconomyFlow.test_agent_proposals_require_approval ___________
tests/integration/test_end_to_end_gift_economy.py:309: in test_agent_proposals_require_approval
    assert matchmaker_resp.status_code == 200
E   assert 500 == 200
E    +  where 500 = <Response [500 Internal Server Error]>.status_code
----------------------------- Captured stdout call -----------------------------

=== Testing Agent Approval Gates ===
________ TestKnowledgeDistribution.test_complete_file_distribution_flow ________
tests/integration/test_knowledge_distribution.py:66: in test_complete_file_distribution_flow
    assert upload_resp.status_code == 200
E   assert 500 == 200
E    +  where 500 = <Response [500 Internal Server Error]>.status_code
----------------------------- Captured stdout call -----------------------------

=== Step 1: Creating test file ===
Created test file: 8750 bytes

=== Step 2: Uploading file ===
_____________ TestKnowledgeDistribution.test_library_node_caching ______________
tests/integration/test_knowledge_distribution.py:190: in test_library_node_caching
    print(f"Cache size: {stats['cache_size_bytes']} bytes")
                         ^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'cache_size_bytes'
----------------------------- Captured stdout call -----------------------------

=== Testing Library Node Caching ===
_______________ TestGovernanceRepository.test_outreach_ephemeral _______________
tests/test_governance_silence_weight.py:379: in test_outreach_ephemeral
    assert retrieved is not None
E   assert None is not None
_______________________ TestTimeControl.test_freeze_time _______________________
/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/unittest/mock.py:1581: in __enter__
    setattr(self.target, self.attribute, new_attr)
E   TypeError: cannot set 'now' attribute of immutable type 'datetime.datetime'

During handling of the above exception, another exception occurred:
tests/test_harness.py:194: in test_freeze_time
    tc.freeze()
tests/harness/time_control.py:64: in freeze
    self._datetime_patch.start()
/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/unittest/mock.py:1624: in start
    result = self.__enter__()
             ^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/unittest/mock.py:1594: in __enter__
    if not self.__exit__(*sys.exc_info()):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/unittest/mock.py:1603: in __exit__
    setattr(self.target, self.attribute, self.temp_original)
E   TypeError: cannot set 'now' attribute of immutable type 'datetime.datetime'
______________________ TestTimeControl.test_advance_time _______________________
/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/unittest/mock.py:1581: in __enter__
    setattr(self.target, self.attribute, new_attr)
E   TypeError: cannot set 'now' attribute of immutable type 'datetime.datetime'

During handling of the above exception, another exception occurred:
tests/test_harness.py:207: in test_advance_time
    tc.freeze()
tests/harness/time_control.py:64: in freeze
    self._datetime_patch.start()
/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/unittest/mock.py:1624: in start
    result = self.__enter__()
             ^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/unittest/mock.py:1594: in __enter__
    if not self.__exit__(*sys.exc_info()):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/unittest/mock.py:1603: in __exit__
    setattr(self.target, self.attribute, self.temp_original)
E   TypeError: cannot set 'now' attribute of immutable type 'datetime.datetime'
___________________ TestTimeControl.test_advance_with_units ____________________
/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/unittest/mock.py:1581: in __enter__
    setattr(self.target, self.attribute, new_attr)
E   TypeError: cannot set 'now' attribute of immutable type 'datetime.datetime'

During handling of the above exception, another exception occurred:
tests/test_harness.py:220: in test_advance_with_units
    tc.freeze()
tests/harness/time_control.py:64: in freeze
    self._datetime_patch.start()
/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/unittest/mock.py:1624: in start
    result = self.__enter__()
             ^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/unittest/mock.py:1594: in __enter__
    if not self.__exit__(*sys.exc_info()):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/unittest/mock.py:1603: in __exit__
    setattr(self.target, self.attribute, self.temp_original)
E   TypeError: cannot set 'now' attribute of immutable type 'datetime.datetime'
_______________ TestTimeControl.test_freeze_time_context_manager _______________
/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/unittest/mock.py:1581: in __enter__
    setattr(self.target, self.attribute, new_attr)
E   TypeError: cannot set 'now' attribute of immutable type 'datetime.datetime'

During handling of the above exception, another exception occurred:
tests/test_harness.py:233: in test_freeze_time_context_manager
    with freeze_time() as tc:
         ^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py:137: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
tests/harness/time_control.py:123: in freeze_time
    tc.freeze(at)
tests/harness/time_control.py:64: in freeze
    self._datetime_patch.start()
/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/unittest/mock.py:1624: in start
    result = self.__enter__()
             ^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/unittest/mock.py:1594: in __enter__
    if not self.__exit__(*sys.exc_info()):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/unittest/mock.py:1603: in __exit__
    setattr(self.target, self.attribute, self.temp_original)
E   TypeError: cannot set 'now' attribute of immutable type 'datetime.datetime'
______________ TestTimeControl.test_advance_time_context_manager _______________
/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/unittest/mock.py:1581: in __enter__
    setattr(self.target, self.attribute, new_attr)
E   TypeError: cannot set 'now' attribute of immutable type 'datetime.datetime'

During handling of the above exception, another exception occurred:
tests/test_harness.py:243: in test_advance_time_context_manager
    with advance_time(hours=24) as tc:
         ^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py:137: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
tests/harness/time_control.py:148: in advance_time
    tc.freeze()
tests/harness/time_control.py:64: in freeze
    self._datetime_patch.start()
/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/unittest/mock.py:1624: in start
    result = self.__enter__()
             ^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/unittest/mock.py:1594: in __enter__
    if not self.__exit__(*sys.exc_info()):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.12/3.12.12/Frameworks/Python.framework/Versions/3.12/lib/python3.12/unittest/mock.py:1603: in __exit__
    setattr(self.target, self.attribute, self.temp_original)
E   TypeError: cannot set 'now' attribute of immutable type 'datetime.datetime'
___________________ TestTrustGraphFixtures.test_revoke_vouch ___________________
tests/test_harness.py:313: in test_revoke_vouch
    assert fixture.get_trust("bob") == 0.0
E   AssertionError: assert 1.0 == 0.0
E    +  where 1.0 = get_trust('bob')
E    +    where get_trust = <tests.harness.trust_fixtures.TrustGraphFixture object at 0x115f63ef0>.get_trust
_________________ TestBundleCreation.test_create_simple_bundle _________________
tests/unit/test_bundle_service.py:50: in test_create_simple_bundle
    bundle = await bundle_service.create_bundle(bundle_create)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/services/bundle_service.py:79: in create_bundle
    await QueueManager.enqueue(QueueName.OUTBOX, bundle)
app/database/queues.py:120: in enqueue
    await db.execute("""
venv/lib/python3.12/site-packages/aiosqlite/core.py:193: in execute
    cursor = await self._execute(self._conn.execute, sql, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:132: in _execute
    return await future
           ^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:115: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: attempt to write a readonly database
_____________ TestBundleCreation.test_create_bundle_with_ttl_hours _____________
tests/unit/test_bundle_service.py:71: in test_create_bundle_with_ttl_hours
    bundle = await bundle_service.create_bundle(bundle_create)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/services/bundle_service.py:79: in create_bundle
    await QueueManager.enqueue(QueueName.OUTBOX, bundle)
app/database/queues.py:120: in enqueue
    await db.execute("""
venv/lib/python3.12/site-packages/aiosqlite/core.py:193: in execute
    cursor = await self._execute(self._conn.execute, sql, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:132: in _execute
    return await future
           ^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:115: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: attempt to write a readonly database
________________ TestBundleCreation.test_create_bundle_auto_ttl ________________
tests/unit/test_bundle_service.py:89: in test_create_bundle_auto_ttl
    bundle = await bundle_service.create_bundle(bundle_create)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/services/bundle_service.py:79: in create_bundle
    await QueueManager.enqueue(QueueName.OUTBOX, bundle)
app/database/queues.py:120: in enqueue
    await db.execute("""
venv/lib/python3.12/site-packages/aiosqlite/core.py:193: in execute
    cursor = await self._execute(self._conn.execute, sql, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:132: in _execute
    return await future
           ^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:115: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: attempt to write a readonly database
_______________ TestBundleCreation.test_create_bundle_with_tags ________________
tests/unit/test_bundle_service.py:105: in test_create_bundle_with_tags
    bundle = await bundle_service.create_bundle(bundle_create)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/services/bundle_service.py:79: in create_bundle
    await QueueManager.enqueue(QueueName.OUTBOX, bundle)
app/database/queues.py:120: in enqueue
    await db.execute("""
venv/lib/python3.12/site-packages/aiosqlite/core.py:193: in execute
    cursor = await self._execute(self._conn.execute, sql, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:132: in _execute
    return await future
           ^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:115: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: attempt to write a readonly database
____________ TestBundleCreation.test_bundle_id_is_content_addressed ____________
tests/unit/test_bundle_service.py:119: in test_bundle_id_is_content_addressed
    bundle1 = await bundle_service.create_bundle(bundle1_create)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/services/bundle_service.py:79: in create_bundle
    await QueueManager.enqueue(QueueName.OUTBOX, bundle)
app/database/queues.py:120: in enqueue
    await db.execute("""
venv/lib/python3.12/site-packages/aiosqlite/core.py:193: in execute
    cursor = await self._execute(self._conn.execute, sql, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:132: in _execute
    return await future
           ^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:115: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: attempt to write a readonly database
_______________ TestBundleValidation.test_validate_valid_bundle ________________
tests/unit/test_bundle_service.py:139: in test_validate_valid_bundle
    bundle = await bundle_service.create_bundle(bundle_create)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/services/bundle_service.py:79: in create_bundle
    await QueueManager.enqueue(QueueName.OUTBOX, bundle)
app/database/queues.py:120: in enqueue
    await db.execute("""
venv/lib/python3.12/site-packages/aiosqlite/core.py:193: in execute
    cursor = await self._execute(self._conn.execute, sql, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:132: in _execute
    return await future
           ^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:115: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: attempt to write a readonly database
______________ TestBundleValidation.test_reject_tampered_payload _______________
tests/unit/test_bundle_service.py:154: in test_reject_tampered_payload
    bundle = await bundle_service.create_bundle(bundle_create)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/services/bundle_service.py:79: in create_bundle
    await QueueManager.enqueue(QueueName.OUTBOX, bundle)
app/database/queues.py:120: in enqueue
    await db.execute("""
venv/lib/python3.12/site-packages/aiosqlite/core.py:193: in execute
    cursor = await self._execute(self._conn.execute, sql, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:132: in _execute
    return await future
           ^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:115: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: attempt to write a readonly database
_______________ TestBundleValidation.test_reject_expired_bundle ________________
tests/unit/test_bundle_service.py:175: in test_reject_expired_bundle
    bundle = await bundle_service.create_bundle(bundle_create)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/services/bundle_service.py:79: in create_bundle
    await QueueManager.enqueue(QueueName.OUTBOX, bundle)
app/database/queues.py:120: in enqueue
    await db.execute("""
venv/lib/python3.12/site-packages/aiosqlite/core.py:193: in execute
    cursor = await self._execute(self._conn.execute, sql, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:132: in _execute
    return await future
           ^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:115: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: attempt to write a readonly database
______________ TestBundleValidation.test_reject_invalid_signature ______________
tests/unit/test_bundle_service.py:190: in test_reject_invalid_signature
    bundle = await bundle_service.create_bundle(bundle_create)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/services/bundle_service.py:79: in create_bundle
    await QueueManager.enqueue(QueueName.OUTBOX, bundle)
app/database/queues.py:120: in enqueue
    await db.execute("""
venv/lib/python3.12/site-packages/aiosqlite/core.py:193: in execute
    cursor = await self._execute(self._conn.execute, sql, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:132: in _execute
    return await future
           ^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:115: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: attempt to write a readonly database
________________ TestBundleReceiving.test_receive_valid_bundle _________________
tests/unit/test_bundle_service.py:247: in test_receive_valid_bundle
    bundle = await bundle_service.create_bundle(bundle_create)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/services/bundle_service.py:79: in create_bundle
    await QueueManager.enqueue(QueueName.OUTBOX, bundle)
app/database/queues.py:120: in enqueue
    await db.execute("""
venv/lib/python3.12/site-packages/aiosqlite/core.py:193: in execute
    cursor = await self._execute(self._conn.execute, sql, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:132: in _execute
    return await future
           ^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:115: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: attempt to write a readonly database
_______________ TestBundleReceiving.test_reject_duplicate_bundle _______________
tests/unit/test_bundle_service.py:263: in test_reject_duplicate_bundle
    bundle = await bundle_service.create_bundle(bundle_create)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/services/bundle_service.py:79: in create_bundle
    await QueueManager.enqueue(QueueName.OUTBOX, bundle)
app/database/queues.py:120: in enqueue
    await db.execute("""
venv/lib/python3.12/site-packages/aiosqlite/core.py:193: in execute
    cursor = await self._execute(self._conn.execute, sql, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:132: in _execute
    return await future
           ^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:115: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: attempt to write a readonly database
______________ TestBundleReceiving.test_quarantine_invalid_bundle ______________
tests/unit/test_bundle_service.py:282: in test_quarantine_invalid_bundle
    bundle = await bundle_service.create_bundle(bundle_create)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/services/bundle_service.py:79: in create_bundle
    await QueueManager.enqueue(QueueName.OUTBOX, bundle)
app/database/queues.py:120: in enqueue
    await db.execute("""
venv/lib/python3.12/site-packages/aiosqlite/core.py:193: in execute
    cursor = await self._execute(self._conn.execute, sql, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:132: in _execute
    return await future
           ^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:115: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: attempt to write a readonly database
_____________ TestBundleProperties.test_bundle_snake_case_aliases ______________
tests/unit/test_bundle_service.py:305: in test_bundle_snake_case_aliases
    bundle = await bundle_service.create_bundle(bundle_create)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/services/bundle_service.py:79: in create_bundle
    await QueueManager.enqueue(QueueName.OUTBOX, bundle)
app/database/queues.py:120: in enqueue
    await db.execute("""
venv/lib/python3.12/site-packages/aiosqlite/core.py:193: in execute
    cursor = await self._execute(self._conn.execute, sql, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:132: in _execute
    return await future
           ^^^^^^^^^^^^
venv/lib/python3.12/site-packages/aiosqlite/core.py:115: in run
    result = function()
             ^^^^^^^^^^
E   sqlite3.OperationalError: attempt to write a readonly database
=============================== warnings summary ===============================
venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:295: 39 warnings
tests/test_api_endpoint_fixes.py: 12 warnings
  /Users/annhoward/src/solarpunk_utopia/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:295: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.10/migration/
    warnings.warn(DEPRECATION_MESSAGE, DeprecationWarning)

tests/e2e/test_rapid_response_e2e.py: 6 warnings
tests/e2e/test_sanctuary_network_e2e.py: 28 warnings
tests/test_fraud_abuse_protections.py: 4 warnings
tests/test_sanctuary_multi_steward_verification.py: 73 warnings
  /Users/annhoward/src/solarpunk_utopia/venv/lib/python3.12/site-packages/pydantic/main.py:214: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)

tests/test_api_endpoint_fixes.py::TestProposalRejection::test_reject_proposal_has_auth_dependency
tests/test_api_endpoint_fixes.py::TestProposalRejection::test_reject_proposal_has_auth_dependency
tests/test_api_endpoint_fixes.py::test_commitments_router_registered
tests/test_api_endpoint_fixes.py::test_commitments_router_registered
  /Users/annhoward/src/solarpunk_utopia/venv/lib/python3.12/site-packages/pydantic/_internal/_generate_schema.py:297: PydanticDeprecatedSince20: `json_encoders` is deprecated. See https://docs.pydantic.dev/2.10/concepts/serialization/#custom-serializers for alternatives. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.10/migration/
    warnings.warn(

tests/test_governance_silence_weight.py::TestPrivacyGuarantees::test_silent_voters_computed_not_stored
  tests/test_governance_silence_weight.py:415: PytestWarning: The test <Function test_silent_voters_computed_not_stored> is marked with '@pytest.mark.asyncio' but it is not an async function. Please remove the asyncio mark. If the test is not marked explicitly, check for global marks applied via 'pytestmark'.
    def test_silent_voters_computed_not_stored(self):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED tests/e2e/test_rapid_response_e2e.py::TestRapidResponseE2E::test_full_rapid_response_flow
FAILED tests/e2e/test_rapid_response_e2e.py::TestRapidResponseE2E::test_critical_alert_requires_high_trust
FAILED tests/e2e/test_rapid_response_e2e.py::TestRapidResponseE2E::test_critical_alert_auto_downgrade_if_unconfirmed
FAILED tests/e2e/test_rapid_response_e2e.py::TestRapidResponseE2E::test_alert_propagation_priority
FAILED tests/e2e/test_rapid_response_e2e.py::TestRapidResponseE2E::test_alert_purge_after_24_hours
FAILED tests/e2e/test_rapid_response_e2e.py::TestRapidResponseE2E::test_responder_coordination_flow
FAILED tests/integration/test_end_to_end_gift_economy.py::TestGiftEconomyFlow::test_complete_offer_need_exchange_flow
FAILED tests/integration/test_end_to_end_gift_economy.py::TestGiftEconomyFlow::test_bundle_propagation_across_services
FAILED tests/integration/test_end_to_end_gift_economy.py::TestGiftEconomyFlow::test_agent_proposals_require_approval
FAILED tests/integration/test_knowledge_distribution.py::TestKnowledgeDistribution::test_complete_file_distribution_flow
FAILED tests/integration/test_knowledge_distribution.py::TestKnowledgeDistribution::test_library_node_caching
FAILED tests/test_governance_silence_weight.py::TestGovernanceRepository::test_outreach_ephemeral
FAILED tests/test_harness.py::TestTimeControl::test_freeze_time - TypeError: ...
FAILED tests/test_harness.py::TestTimeControl::test_advance_time - TypeError:...
FAILED tests/test_harness.py::TestTimeControl::test_advance_with_units - Type...
FAILED tests/test_harness.py::TestTimeControl::test_freeze_time_context_manager
FAILED tests/test_harness.py::TestTimeControl::test_advance_time_context_manager
FAILED tests/test_harness.py::TestTrustGraphFixtures::test_revoke_vouch - Ass...
FAILED tests/unit/test_bundle_service.py::TestBundleCreation::test_create_simple_bundle
FAILED tests/unit/test_bundle_service.py::TestBundleCreation::test_create_bundle_with_ttl_hours
FAILED tests/unit/test_bundle_service.py::TestBundleCreation::test_create_bundle_auto_ttl
FAILED tests/unit/test_bundle_service.py::TestBundleCreation::test_create_bundle_with_tags
FAILED tests/unit/test_bundle_service.py::TestBundleCreation::test_bundle_id_is_content_addressed
FAILED tests/unit/test_bundle_service.py::TestBundleValidation::test_validate_valid_bundle
FAILED tests/unit/test_bundle_service.py::TestBundleValidation::test_reject_tampered_payload
FAILED tests/unit/test_bundle_service.py::TestBundleValidation::test_reject_expired_bundle
FAILED tests/unit/test_bundle_service.py::TestBundleValidation::test_reject_invalid_signature
FAILED tests/unit/test_bundle_service.py::TestBundleReceiving::test_receive_valid_bundle
FAILED tests/unit/test_bundle_service.py::TestBundleReceiving::test_reject_duplicate_bundle
FAILED tests/unit/test_bundle_service.py::TestBundleReceiving::test_quarantine_invalid_bundle
FAILED tests/unit/test_bundle_service.py::TestBundleProperties::test_bundle_snake_case_aliases
================ 31 failed, 264 passed, 167 warnings in 11.44s =================
